<!-- 
	Jinja2 expressions by Benjaming Nguyen.
	HTML and CSS by Zak Kazakoff.
 -->

{% extends "base.html" %}

{% block content %}

	<link rel="stylesheet" href="{{ url_for('static', filename='questionpage.css')}}">
	<script type="text/javascript" src="{{ url_for('static',filename='userValidation.js')}}"></script>	
		<!-- <iframe width="420" height="315" src ={{question_list[current_question][2]}}></iframe> -->
		<!-- Embedded link to YouTube song is hidden so the user can only hear audio. -->
		<div id = "hider">
			<iframe id="player"
				width="640" height="360"
				src="https://www.youtube.com/embed/{{question_list[current_question][2]}}?enablejsapi=1"
			></iframe>
		
		</div>
		<!-- Empty bootstrap columns to center page content with a maximum width of a third of the page. -->
		<div class="col-md-4 col-sm-4 col-xs-12">

		</div>
		<div class="col-md-4 col-sm-4 col-xs-12" id="format">
			<h1>{{quiz_name}} - {{current_question + 1}}</h1>
			<br><br>
			<div>Click to Play Audio</div>
			<button onclick = "myFunction({{question_list[current_question][8]}},{{question_list[current_question][3]}})"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSxiaVVwb7cKOU1gVVtCN_lX-8UIUC-EMvTvMzjEpu-mO_StnZb&usqp=CAU" width="20%" height="20%"></button>
			<form name = "quiz_question_form" onsubmit="return validateQuizQuestionForm()" method = "post">
			{{ form.hidden_tag() }}
			<br>
			<!-- Drop-down form to select answer. -->
			<p>{{ form.answer.label }}: <br> {{ form.answer }}</p>
			<p id = "answer_validate_message"></p>
			{% for error in form.answer.errors %}
				<span style="color: red;">[{{ error }}]</span>
			{% endfor %}
			<br><br><br><br>
			{% if current_question != 0%}
				<a href="{{ url_for('start_quiz',quiz_id = quiz_id,current_question = current_question -1)}}"><input type="button" value="Previous Question" id="previous"></a>
			{% endif %}
			<div id="next">{{ form.submit_answer() }}</div>
			</form>	
		</div>
		<div class="col-md-4 col-sm-4 col-xs-12">

		</div>

	<script>
		var tag = document.createElement('script');

		tag.src = "https://www.youtube.com/iframe_api";
		var firstScriptTag = document.getElementsByTagName('script')[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

		var player;
		function onYouTubeIframeAPIReady() {
			player = new YT.Player('player', {
			origin : window.location.origin,
			});
		}
		function myFunction(start_time,play_time){
			player.setVolume(50)
			player.playVideo()
			player.seekTo(start_time)
			setTimeout(function(){ player.pauseVideo(); }, (play_time * 1000));
		}
		document.getElementById("hider").style.display = "none";
		{% if current_question+1 == question_list|length %}
			document.getElementById("submit_answer").value = "Submit Quiz"
		{% endif %}
	</script>

{% endblock %}